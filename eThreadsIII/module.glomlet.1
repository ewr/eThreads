#---------------------------------------------------------------------
#  $Id: module.glomlet.1,v 1.1 2000/06/01 00:32:04 eric Exp $
#
#  eThreads - revolutionizing forums... again.
#  Copyright (C) 1999-2000 Eric Richardson
#
#       This program is free software; you can redistribute it and/or
#       modify it under the terms of the GNU General Public License
#       as published by the Free Software Foundation; either version 2
#       of the License, or (at your option) any later version.
#
#       This program is distributed in the hope that it will be useful,
#       but WITHOUT ANY WARRANTY; without even the implied warranty of
#       MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#       GNU General Public License for more details.
#
#       You should have received a copy of the GNU General Public License
#       along with this program; if not, write to the Free Software
#       Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
#       02111-1307, USA.
#
#       For information, contact eThreads:
#           ethreads@ethreads.com
#           http://ethreads.com
#
#  This is a glomlet.  Glomlets are small plugins that modify the 
#  behavior of a glomule class.  Multiple glomets may be layered 
#  onto a plain glomule class in order to achieve the desired effect.
#
#  This is the invitation-only glomlet.  It only allows users who have 
#  been granted browse rights to see the glomule
#
#---------------------------------------------------------------------

package eThreads::glomlet::1;

use strict;
use eThreads::core;
use vars qw(%e $core $viewer $m_db $db %post %input);

#----------

sub init {
	my $class = shift;

	# the first thing we do is init our core connection
	$core = eThreads::core->substart();

	my %g = (
		info	=> {
			name	=> "disable-html",
			author	=> "eric richardson <e\@ethreads.com>",
		},
	);

	$core->add_sub_wrap(
		sub		=> "eThreads::glomule::$e{forum}{type}::fields_schema",
		after	=> \&disable_html,
	);

	bless ( \%g , $class );
}

#----------

sub disable_html {
	my %schema = @Hook::WrapSub::result;

	foreach my $field (keys %schema) {
		$schema{$field}{allow_html} = 0;
	}

	return %schema;
}

#------------#
# Change Log #
#------------#

# $Log: module.glomlet.1,v $
# Revision 1.1  2000/06/01 00:32:04  eric
# * monster commit
# * initial glomlet support
# * started hacking presets into something more flexible
# * started hacking glomule class and inheritance support directly into
#   look themes
#

#---------------#
# End of Script #
#---------------#

1;
